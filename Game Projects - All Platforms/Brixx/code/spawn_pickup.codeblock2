//--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
//20% chance to spawn a pickup
//--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Roll 100 Into dice_roll
If dice_roll > 40
    Return
End
//--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Spawn pickup_actor X=block_x*16+8 Y=block_y*16+8
# Set index=7
# Set new_var1=index
# NewAnimation pickups_anim Frame=index
# Return
//--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
//spawn a pickup based on weighted probability
//--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Roll 100 Into dice_roll
Variable word index=0
Variable word cumulative_value=0
Set cumulative_value=0
For index From 0 To 7
    Set cumulative_value=cumulative_value + pickup_probability[index]
    If dice_roll < cumulative_value
        Set new_var1=index
        NewAnimation pickups_anim Frame=index
        Return
    End
End